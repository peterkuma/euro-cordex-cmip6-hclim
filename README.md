# Code for the manuscript “EURO-CORDEX-CMIP6 ensemble generated by HCLIM43-ALADIN”

This repository contains processing and plotting code for the manuscript
“EURO-CORDEX-CMIP6 ensemble generated by HCLIM43-ALADIN”, currently in
preparation.

This code processes data from HCLIM43-ALADIN (a regional climate model, RCM)
downscaled simulations of a number of general circulation models (GCMs) and the
ERA5 reanalysis, observations from E-OBS, and the CERRA, CERRA-Land, and ERA5
reanalyses.

## Requirements

- GNU Parallel >= 20220722 (tested with 20220722)
- CDO >= 2.3.0 (tested with 2.3.0)
- Python >= 3.9 (tested with 3.9.25)
- Python packages specified in `requirements.txt`

To install the Python packages, it is recommended to use a Python virtual
environment:

```sh
python3 -m venv venv
. venv/bin/activate
pip install -r requirements.txt
```

This installs the precise version of the Python packages in order to maintain
reproducibility. Newer packages may be compatible as well, but this is untested.

You can leave the `venv` with `deactivate` and use it again with
`. venv/bin/activate`.

## Input data

Input data are required to be able to meaningfully use the supplied code. These
include the global and regional model output. The paths to the source data are
specified in `sources/paths`. These should be changed to the actual paths on
your system. The model output is currently not yet publicly available and will
be provided once the manuscript is submitted. It can also be provided on request
by the authors.

## Usage

To run the processing and plotting code, the `./run TASK` script should be used,
where `TASK` is the task name. The following tasks are available:

```
source_links          Create source symlinks in the input directory.
remap_landmask        Remap land mask to a 1x1 degree grid for GCM calculations.
remap_obs             Remap observatiosn to a 1x1 degree grid for GCM calculations.
ensemble              Create an model ensemble.
calc_stats            Calculate statistics (dep: source_links, remap_landmask, remap_obs, ensemble).
plot_map              Plot maps from the statistics (dep: calc_stats).
plot_trend            Plot linear trends (dep: calc_stats).
plot_heatmap          Plot heatmaps (dep: calc_stats).
plot_boxplot          Plot boxplots with statistics (dep: calc_stats).
plot_gcm_rcm_scatter  Plot GCM-RCM scatter plot for temperature and precipitation (dep: calc_stats).
model_ranking         Calculate model ranking (dep: calc_stats).
plot_ranking          Plot model ranking (dep: model_ranking).
```

The individual processing and plotting commands are under `bin`. To see help
for a command, run it without any arguments, e.g., `bin/calc_stats`.

The `run` script and the command should always be run from the main directory of
this repository.

## License

The code has been developed by Peter Kuma and is available under the terms of
the MIT license (see `LICENSE.md`).
